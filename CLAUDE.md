# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

@AGENTS.md

## Mandatory Pre-Work Verification Process

**⚠️ For ALL work, the following MUST be completed before starting any task:**

### Required Checklist
- [ ] CLAUDE.md/AGENTS.md have been re-read
- [ ] Relevant template documents have been reviewed (docs/templates/)
- [ ] Existing similar documents have been referenced to understand format
- [ ] Project-specific standards > general knowledge priority has been confirmed

### Additional Verification for Documentation Tasks
- [ ] Applicable template has been read and loaded first
- [ ] Template structure is being followed completely
- [ ] Completed work has been re-verified against template compliance

**If this verification process is skipped, immediately STOP work and report to the user.**
**When uncertain or unclear about anything, do NOT interpret independently - always confirm with the user.**

### Rationale
Ignoring project-established documentation standards invalidates the team's entire documentation effort and destroys quality consistency. Prioritizing project-specific standards over general knowledge is essential for collaborative development.

## TDL Staged Approval Protocol

**⚠️ IMPORTANT: When working on TDL tasks, create documents ONE STAGE AT A TIME and wait for explicit user approval before proceeding to the next stage.**

### Required Workflow

1. **Create Analysis** → Present for review → **Wait for explicit approval** (e.g., "承認します" / "Approved")
2. **Create Requirements** → Present for review → **Wait for explicit approval**
3. **Create Task design/plan** → Present for review → **Wait for explicit approval**
4. **Begin implementation**

### Critical Rules

- **Never** create Analysis + Requirements + Task documents in a single session without intermediate approvals
- **Always stop** after completing each stage and wait for user approval before proceeding
- **Do not interpret** general requests like "着手してください" (start work) or "Option A でお願いします" as permission to skip approval gates
- User approval must be **explicit** - phrases like "承認します", "Approved", "proceed to next stage", or similar clear confirmations

### Violation Recovery

If you realize you've created multiple stages without approvals:
1. Stop immediately
2. Inform the user of the violation
3. Ask whether to: (A) delete premature documents and restart with proper approvals, or (B) treat all as drafts and review sequentially

For detailed TDL workflow and document creation order, see **@AGENTS.md** section "Traceable Development Lifecycle (TDL)".
